<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800 truncate max-w-2xl"><%= passage.title %></h1>
    <div class="flex space-x-3">
      <a href="/admin/passages/<%= passage._id %>/edit" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-md transition duration-200 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
          <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
        </svg>
        Edit Passage
      </a>
      <a href="/admin/passages" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md transition duration-200 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
        </svg>
        Back to Passages
      </a>
    </div>
  </div>

  <!-- Passage Info Card -->
  <div class="bg-white rounded-lg shadow-md overflow-hidden mb-8">
    <div class="px-6 py-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center">
      <div>
        <h2 class="text-xl font-semibold text-gray-800">Reading Passage</h2>
        <div class="mt-1 flex items-center">
          <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
          </span>
          <span class="ml-2 text-sm text-gray-500">
            Created: <%= new Date(passage.createdAt).toLocaleDateString() %>
          </span>
        </div>
      </div>
    </div>
    <div class="p-6">
      <div class="prose max-w-none">
        <% 
          // Split content by paragraphs and render
          const paragraphs = passage.content.split(/\n\s*\n/);
        %>
        <% paragraphs.forEach((paragraph, index) => { %>
          <p id="paragraph-<%= index %>" class="mb-4"><%= paragraph %></p>
        <% }); %>
      </div>
    </div>
  </div>

 <!-- Questions Section -->
<div class="mt-8">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-bold text-gray-800">Questions</h2>
    <a href="/admin/passages/<%= passage._id %>/questions/create" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition duration-200 flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
      </svg>
      Add New Question
    </a>
  </div>

  <% if (questions && questions.length > 0) { %>
    <div class="space-y-6">
      <% questions.forEach((question, index) => { %>
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
          <div class="px-6 py-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center">
            <div class="flex items-center">
              
               
              <span class="px-2 py-1 rounded-full text-xs font-medium 
                <%= question.questionType === 'multiple_choice' ? 'bg-blue-100 text-blue-800' : 
                  question.questionType === 'fill_blank' ? 'bg-purple-100 text-purple-800' : 
                  question.questionType === 'matching' ? 'bg-amber-100 text-amber-800' : 
                  'bg-emerald-100 text-emerald-800' %>">
                <%= question.questionType.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase()) %>
              </span>
              <span class="ml-4 text-sm text-gray-700">Score: <%= question.score %> points</span>
            </div>
            <div class="flex space-x-2">
              <a href="/admin/questions/<%= question._id %>/edit" class="text-indigo-600 hover:text-indigo-900" title="Edit Question">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
              </a>
              <button onclick="deleteQuestion('<%= question._id %>')" class="text-red-600 hover:text-red-900" title="Delete Question">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
              </button>
            </div>
          </div>
          <div class="p-6">
            <% if (question.title) { %>
              <div class="mb-3">
                <h3 class="text-lg font-semibold text-gray-700 leading-relaxed">
                  <%- question.title.replace(/\r\n/g, '<br>').replace(/\n/g, '<br>') %>
                </h3>
              </div>
            <% } %>
            
            <% if (question.questionType !== 'fill_blank') { %>
              <div class="mb-4">
                <h3 class="text-lg font-medium text-gray-900">Question:</h3>
                <p class="mt-1 text-gray-800"><%= question.questionText %></p>
              </div>
            <% } %>

            <!-- Multiple Choice Questions -->
            <% if (question.questionType === 'multiple_choice' && question.options) { %>
              <div class="mt-4">
                <h4 class="text-md font-medium text-gray-900">Options:</h4>
                <div class="ml-4 mt-2 space-y-2">
                  <% question.options.forEach((option, optIndex) => { 
                    // Kiểm tra xem đây có phải là đáp án đúng không
                    let isCorrect = false;
                    if (Array.isArray(question.correctAnswer)) {
                      // Nhiều đáp án đúng - kiểm tra nếu option này nằm trong mảng correctAnswer
                      isCorrect = question.correctAnswer.includes(option);
                    } else {
                      // Một đáp án đúng - so sánh trực tiếp với option
                      isCorrect = question.correctAnswer === option;
                    }
                  %>
                    <div class="flex items-start">
                      <div class="flex items-center h-5">
                        <input 
                          id="option-<%= index %>-<%= optIndex %>" 
                          name="question-<%= index %>" 
                          type="<%= question.multipleAnswers ? 'checkbox' : 'radio' %>"
                          class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"
                          <%= isCorrect ? 'checked' : '' %>
                          disabled
                        >
                      </div>
                      <div class="ml-3 text-sm">
                        <label for="option-<%= index %>-<%= optIndex %>" class="font-medium text-gray-700 <%= isCorrect ? 'text-green-700' : '' %>">
                          <%= option %>
                          <% if (isCorrect) { %>
                            <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                              Correct Answer
                            </span>
                          <% } %>
                        </label>
                      </div>
                    </div>
                  <% }); %>
                </div>
                
                <% if (question.multipleAnswers) { %>
                  <div class="mt-3 p-3 bg-blue-50 rounded-md">
                    <h5 class="text-sm font-medium text-blue-800">Multiple Correct Answers:</h5>
                    <div class="mt-1 flex flex-wrap gap-2">
                      <% 
                        // Lấy danh sách các đáp án đúng
                        let correctAnswers = [];
                        if (Array.isArray(question.correctAnswer)) {
                          correctAnswers = question.correctAnswer.map(answer => {
                            // Tìm index của đáp án này trong options
                            const index = question.options.indexOf(answer);
                            return {
                              index: index,
                              text: answer
                            };
                          });
                        } else if (question.correctAnswer) {
                          // Tìm index của đáp án này trong options
                          const index = question.options.indexOf(question.correctAnswer);
                          correctAnswers.push({
                            index: index,
                            text: question.correctAnswer
                          });
                        }
                        
                        // Lọc bỏ các đáp án không tìm thấy trong options
                        correctAnswers = correctAnswers.filter(ans => ans.index >= 0);
                        
                        // Sắp xếp theo thứ tự
                        correctAnswers.sort((a, b) => a.index - b.index);
                      %>
                      
                      <% if (correctAnswers.length > 0) { %>
                        <% correctAnswers.forEach(answer => { %>
                          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800">
                              <%= answer.text %>
                          </span>
                        <% }); %>
                      <% } else { %>
                        <span class="text-sm text-gray-500">No valid correct answers found in options</span>
                      <% } %>
                    </div>
                    <p class="mt-2 text-sm text-blue-700">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                      </svg>
                      Người dùng phải chọn tất cả các đáp án đúng để được điểm.
                    </p>
                  </div>
                <% } else { %>
                  <div class="mt-3">
                    <h5 class="text-sm font-medium text-gray-900">Correct Answer:</h5>
                    <% 
                      let correctIndex = -1;
                      let correctText = "No valid correct answer specified";
                      
                      if (question.correctAnswer) {
                        // Tìm index của đáp án đúng trong options
                        correctIndex = question.options.indexOf(question.correctAnswer);
                        if (correctIndex >= 0) {
                          correctText = question.correctAnswer;
                        } else {
                          correctText = `Answer "${question.correctAnswer}" not found in options`;
                        }
                      }
                    %>
                    
                    <% if (correctIndex >= 0) { %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800">
                        Option <%= correctIndex + 1 %>: <%= correctText %>
                      </span>
                    <% } else { %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
                        <%= correctText %>
                      </span>
                    <% } %>
                  </div>
                <% } %>
                
                <!-- Debug Information -->
                <div class="mt-3 p-2 bg-gray-50 rounded-md text-xs text-gray-500">
                  <details>
                    <summary>Debug Info</summary>
                    <div class="mt-1">
                      <p>correctAnswer type: <%= typeof question.correctAnswer %></p>
                      <p>correctAnswer value: <%= JSON.stringify(question.correctAnswer) %></p>
                      <p>multipleAnswers: <%= question.multipleAnswers %></p>
                      <p>options: <%= JSON.stringify(question.options) %></p>
                    </div>
                  </details>
                </div>
              </div>

            <!-- Fill in the Blank Questions -->
            <% } else if (question.questionType === 'fill_blank') { %>
              <div class="mt-4">
                <h4 class="text-md font-medium text-gray-900">Fill in the Blank</h4>
                
                <!-- Hiển thị nội dung câu hỏi -->
                <div class="mt-3">
                  <h5 class="text-sm font-medium text-gray-900">Question:</h5>
                  <% 
                    // Giữ nguyên nội dung câu hỏi, chỉ thay thế xuống dòng
                    let displayText = question.questionText;
                    displayText = displayText.replace(/\r\n/g, '<br>').replace(/\n/g, '<br>');
                  %>
                  <div class="mt-1 p-3 bg-gray-50 rounded border">
                    <div class="text-gray-800"><%- displayText %></div>
                  </div>
                </div>
                
                <!-- Hiển thị đáp án theo bảng -->
                <% if (question.blankStyle === 'one_word_only') { %>
                  <div class="mt-3">
                    <h5 class="text-sm font-medium text-gray-900">Correct Answer:</h5>
                    <div class="mt-2 overflow-x-auto">
                      <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                          <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                              BLANK POSITION
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                              ANSWER
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                              WORD LIMIT
                            </th>
                          </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                          <% if (question.oneWordAnswers && Array.isArray(question.oneWordAnswers) && question.oneWordAnswers.length > 0) { %>
                            <% question.oneWordAnswers.forEach((answer, index) => { 
                              const blankPosition = question.blankNumbers && question.blankNumbers[index] !== undefined ? 
                                question.blankNumbers[index] : 'N/A';
                              const wordLimit = question.wordLimits && question.wordLimits[index] !== undefined ? 
                                question.wordLimits[index] : 1;
                            %>
                              <tr>
                                <td class="px-6 py-4 whitespace-nowrap">
                                  <div class="text-sm text-gray-900">
                                    <% if (blankPosition !== 'N/A') { %>
                                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        <%= blankPosition %>
                                      </span>
                                    <% } else { %>
                                      <span class="text-gray-500">N/A</span>
                                    <% } %>
                                  </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                  <div class="text-sm text-gray-900 font-medium"><%= answer %></div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                  <div class="text-sm text-gray-900">
                                    <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800">
                                      <%= wordLimit %> <%= wordLimit > 1 ? 'words' : 'word' %>
                                    </span>
                                  </div>
                                </td>
                              </tr>
                            <% }); %>
                          <% } else { %>
                            <tr>
                              <td colspan="3" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                Không có đáp án được chỉ định
                              </td>
                            </tr>
                          <% } %>
                        </tbody>
                      </table>
                    </div>
                  </div>
                <% } else if (question.blankStyle === 'multiple') { %>
                  <!-- Hiển thị cho kiểu nhiều lựa chọn -->
                  <div class="mt-3">
                    <h5 class="text-sm font-medium text-gray-900">Các lựa chọn:</h5>
                    <div class="mt-1 space-y-2">
                      <% if (question.blankOptions && Array.isArray(question.blankOptions)) { %>
                        <% question.blankOptions.forEach((option, optionIndex) => { %>
                          <div class="flex items-center">
                            <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-700 text-xs font-medium mr-2">
                              <%= optionIndex + 1 %>
                            </span>
                            <span class="text-sm text-gray-800"><%= option %></span>
                          </div>
                        <% }); %>
                      <% } else { %>
                        <p class="text-sm text-gray-500">Không có lựa chọn nào được chỉ định</p>
                      <% } %>
                    </div>
                  </div>
                  
                <% } else { %>
                  <!-- Hiển thị cho kiểu đơn giản -->
                  <div class="mt-3">
                    <h5 class="text-sm font-medium text-gray-900">Các đáp án được chấp nhận:</h5>
                    <div class="mt-1 flex flex-wrap gap-2">
                      <% if (question.acceptableAnswers && Array.isArray(question.acceptableAnswers) && question.acceptableAnswers.length > 0) { %>
                        <% question.acceptableAnswers.forEach(answer => { %>
                          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                            <%= answer %>
                          </span>
                        <% }); %>
                      <% } else { %>
                        <p class="text-sm text-gray-500">Không có đáp án được chỉ định</p>
                      <% } %>
                    </div>
                  </div>
                <% } %>
                
                <!-- Debug Information -->
                <div class="mt-3 p-2 bg-gray-50 rounded-md text-xs text-gray-500">
                  <details>
                    <summary>Debug Info</summary>
                    <div class="mt-1">
                      <p>questionType: <%= question.questionType %></p>
                      <p>blankStyle: <%= question.blankStyle %></p>
                      <p>oneWordAnswers: <%= JSON.stringify(question.oneWordAnswers) %></p>
                      <p>wordLimits: <%= JSON.stringify(question.wordLimits) %></p>
                      <p>blankNumbers: <%= JSON.stringify(question.blankNumbers) %></p>
                      <p>correctAnswer: <%= JSON.stringify(question.correctAnswer) %></p>
                    </div>
                  </details>
                </div>
              </div>

            <!-- Matching Questions -->
            <% } else if (question.questionType === 'matching' && question.matchingOptions) { %>
              <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <h4 class="text-md font-medium text-gray-900">Headings:</h4>
                  <ul class="ml-5 mt-2 list-none space-y-1">
                    <% question.matchingOptions.headings.forEach((heading, hIndex) => { %>
                      <li class="text-gray-800">
                        <%= heading %>
                      </li>
                    <% }); %>
                  </ul>
                </div>
                <div>
                  <h4 class="text-md font-medium text-gray-900">Paragraphs:</h4>
                  <ul class="ml-5 mt-2 list-none space-y-1">
                    <% question.matchingOptions.paragraphs.forEach((para, pIndex) => { %>
                      <li class="text-gray-800">
                        <%= para %>
                        <% 
                          // Tìm heading tương ứng với paragraph này
                          const selections = question.correctAnswer.selections || question.correctAnswer;
                          const headingIndex = selections[pIndex];
                          const headingText = headingIndex !== undefined ? question.matchingOptions.headings[headingIndex] : 'Not specified';
                        %>
                        <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                          Matches with: <%= headingText %>
                        </span>
                      </li>
                    <% }); %>
                  </ul>
                </div>
              </div>
              <div class="mt-4">
                <h4 class="text-md font-medium text-gray-900">Correct Matches:</h4>
                <div class="mt-2 overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                      <tr>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Paragraph
                        </th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Heading
                        </th>
                      </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                      <% 
                        // Sắp xếp các paragraph theo thứ tự
                        const selections = question.correctAnswer.selections || question.correctAnswer;
                        const paragraphIndices = Object.keys(selections).sort((a, b) => parseInt(a) - parseInt(b));
                      %>
                      <% paragraphIndices.forEach(paragraphIndex => { 
                        const headingIndex = selections[paragraphIndex];
                        const paragraphText = question.matchingOptions.paragraphs[paragraphIndex];
                        const headingText = question.matchingOptions.headings[headingIndex];
                      %>
                        <tr>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-500">
                              <%= paragraphText ? 
                                  (paragraphText.length > 50 ? 
                                    paragraphText.substring(0, 50) + '...' : 
                                    paragraphText) : 
                                  'Not found' %>
                            </div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-500">
                              <%= headingText || 'Not found' %>
                            </div>
                          </td>
                        </tr>
                      <% }); %>
                    </tbody>
                  </table>
                </div>
              </div>

            <!-- True/False/Not Given Questions -->
            <% } else if (question.questionType === 'true_false_not_given') { %>
              <div class="mt-4">
                <h4 class="text-md font-medium text-gray-900">Correct Answer:</h4>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium 
                  <%= question.correctAnswer === 'true' ? 'bg-green-100 text-green-800' : 
                    question.correctAnswer === 'false' ? 'bg-red-100 text-red-800' : 
                    'bg-gray-100 text-gray-800' %>">
                  <%= question.correctAnswer.charAt(0).toUpperCase() + question.correctAnswer.slice(1).replace('_', ' ') %>
                </span>
              </div>

            <!-- Short Answer Questions -->
            <% } else if (question.questionType === 'short_answer') { %>
              <div class="mt-4">
                <h4 class="text-md font-medium text-gray-900">Loại câu hỏi: Trả lời ngắn</h4>
                
                <div class="mt-3">
                  <h5 class="text-sm font-medium text-gray-900">Giới hạn từ: 
                    <span class="font-normal text-gray-800">
                      <%= question.wordLimit %> từ
                    </span>
                  </h5>
                </div>
                
                <div class="mt-3">
                  <h5 class="text-sm font-medium text-gray-900">Các đáp án được chấp nhận:</h5>
                  <div class="mt-1 flex flex-wrap gap-2">
                    <% if (question.acceptableShortAnswers && Array.isArray(question.acceptableShortAnswers) && question.acceptableShortAnswers.length > 0) { %>
                      <% question.acceptableShortAnswers.forEach(answer => { %>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800">
                          <%= answer %>
                        </span>
                      <% }); %>
                    <% } else { %>
                      <span class="text-sm text-gray-500">Không có đáp án được chỉ định</span>
                    <% } %>
                  </div>
                </div>
                
                <div class="mt-4 p-3 bg-blue-50 rounded-md">
                  <div class="flex">
                    <div class="flex-shrink-0">
                      <svg class="h-5 w-5 text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                      </svg>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm text-blue-700">
                        Học sinh phải trả lời bằng không quá <%= question.wordLimit %> từ. Câu trả lời phải khớp chính xác với một trong các đáp án được chấp nhận.
                      </p>
                    </div>
                  </div>
                </div>
                
                <!-- Debug Information -->
                <div class="mt-3 p-2 bg-gray-50 rounded-md text-xs text-gray-500">
                  <details>
                    <summary>Debug Info</summary>
                    <div class="mt-1">
                      <p>wordLimit: <%= question.wordLimit %></p>
                      <p>acceptableShortAnswers: <%= JSON.stringify(question.acceptableShortAnswers) %></p>
                      <p>correctAnswer: <%= JSON.stringify(question.correctAnswer) %></p>
                    </div>
                  </details>
                </div>
              </div>
            <% } %>
          </div>
        </div>
      <% }); %>
    </div>
  <% } else { %>
    <div class="bg-white rounded-lg shadow-md p-8 text-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <h3 class="mt-4 text-lg font-medium text-gray-900">No questions yet</h3>
      <p class="mt-2 text-gray-500">Create questions for this reading passage to start building your test.</p>
      <div class="mt-6">
        <a href="/admin/passages/<%= passage._id %>/questions/create" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
          Add First Question
        </a>
      </div>
    </div>
  <% } %>
</div>
<% scripts = `<script src="/js/admin/passages/detail.js"></script>` %>